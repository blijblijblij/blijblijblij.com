<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.62.2 with theme Tranquilpeak 0.4.7-BETA"><meta name=author content="Rogier Wessel"><meta name=keywords content><meta name=description content="Introduction I have been amazed by the ease of getting software through the software development cycle once you start doing it the Docker way. I picked it up soon after it came to light, and hammered it hard. At that point I got all developers aligned to use Docker as well.
As we started using Docker more extensively, combining different Frontends services and Backends services through Docker compositions, running multiple hosts, intranet, things started to get a bit more complicated."><meta property="og:description" content="Introduction I have been amazed by the ease of getting software through the software development cycle once you start doing it the Docker way. I picked it up soon after it came to light, and hammered it hard. At that point I got all developers aligned to use Docker as well.
As we started using Docker more extensively, combining different Frontends services and Backends services through Docker compositions, running multiple hosts, intranet, things started to get a bit more complicated."><meta property="og:type" content="article"><meta property="og:title" content="Running pentaho on mesos - part 1"><meta name=twitter:title content="Running pentaho on mesos - part 1"><meta property="og:url" content="https://blijblijblij.com/2016/05/pentaho-and-mesos/"><meta property="twitter:url" content="https://blijblijblij.com/2016/05/pentaho-and-mesos/"><meta property="og:site_name" content="blijblijblij.com"><meta property="og:description" content="Introduction I have been amazed by the ease of getting software through the software development cycle once you start doing it the Docker way. I picked it up soon after it came to light, and hammered it hard. At that point I got all developers aligned to use Docker as well.
As we started using Docker more extensively, combining different Frontends services and Backends services through Docker compositions, running multiple hosts, intranet, things started to get a bit more complicated."><meta name=twitter:description content="Introduction I have been amazed by the ease of getting software through the software development cycle once you start doing it the Docker way. I picked it up soon after it came to light, and hammered it hard. At that point I got all developers aligned to use Docker as well.
As we started using Docker more extensively, combining different Frontends services and Backends services through Docker compositions, running multiple hosts, intranet, things started to get a bit more complicated."><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2016-05-21T11:06:05"><meta property="article:modified_time" content="2016-05-21T11:06:05"><meta property="article:tag" content="mesos"><meta property="article:tag" content="pentaho"><meta name=twitter:card content="summary"><meta name=twitter:site content="@blijblijblij"><meta name=twitter:creator content="@blijblijblij"><meta property="og:image" content="https://www.gravatar.com/avatar/626342d86e1bee29d2d312efd9d2b762?s=640"><meta property="twitter:image" content="https://www.gravatar.com/avatar/626342d86e1bee29d2d312efd9d2b762?s=640"><title>Running pentaho on mesos - part 1</title><link rel=icon href=https://blijblijblij.com/favicon.png><link rel=canonical href=https://blijblijblij.com/2016/05/pentaho-and-mesos/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin=anonymous><link rel=stylesheet href=https://blijblijblij.com/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css></head><body><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://blijblijblij.com/>blijblijblij.com</a></div><a class=header-right-picture href=https://blijblijblij.com/#about><img class=header-picture src="https://www.gravatar.com/avatar/626342d86e1bee29d2d312efd9d2b762?s=90" alt="Author's picture"></a></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=https://blijblijblij.com/#about><img class=sidebar-profile-picture src="https://www.gravatar.com/avatar/626342d86e1bee29d2d312efd9d2b762?s=110" alt="Author's picture"></a><h4 class=sidebar-profile-name>Rogier Wessel</h4><h5 class=sidebar-profile-bio>Happy nerd, ever searching, researching & learning new things &mldr;</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/><i class="sidebar-button-icon fa fa-lg fa-home"></i><span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/categories><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i><span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/tags><i class="sidebar-button-icon fa fa-lg fa-tags"></i><span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/archives><i class="sidebar-button-icon fa fa-lg fa-archive"></i><span class=sidebar-button-desc>Archives</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/#about><i class="sidebar-button-icon fa fa-lg fa-question"></i><span class=sidebar-button-desc>About</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/blijblijblij target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-github"></i><span class=sidebar-button-desc>GitHub</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blijblijblij.com/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i><span class=sidebar-button-desc>RSS</span></a></li></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class="post-header main-content-wrap text-left"><h1 class=post-title itemprop=headline>Running pentaho on mesos - part 1</h1><div class="postShorten-meta post-meta"><time itemprop=datePublished datetime=2016-05-21T11:06:05+02:00>May 21, 2016</time></div></div><div class="post-content markdown" itemprop=articleBody><div class=main-content-wrap><h1 id=introduction>Introduction</h1><p>I have been amazed by the ease of getting software through the software development cycle once you start doing it the <a href=https://www.docker.com/>Docker</a> way. I picked it up soon after <a href=http://www.wired.com/2013/09/docker/>it came to light</a>, and hammered it hard. At that point I got all developers aligned to use Docker as well.</p><p>As we started using Docker more extensively, combining different Frontends services and Backends services through Docker compositions, running multiple hosts, intranet, things started to get a bit more complicated.</p><p><a href=https://twitter.com/adrianmouat>Adrian Mouat</a> acknowledged my next step in a piece he wrote for Oreilly <a href=https://www.oreilly.com/ideas/swarm-v-fleet-v-kubernetes-v-mesos>Swarm v. Fleet v. Kubernetes v. Mesos Comparing different orchestration tools</a> my prefered orchestration framework for our containers would be Mesos.</p><h1 id=define>Define</h1><p>This is an overview of a mesos cluster in its simplest form.
<img src=https://raw.githubusercontent.com/blijblijblij/blog.blijblijblij.com-hugo/9dafdf22f19d04c63eb47e2c9681884694887156/static/images/mesos-arch.png alt="Mesos architectural overview">
<a href=https://www.oreilly.com/ideas/swarm-v-fleet-v-kubernetes-v-mesos>Source</a></p><ul><li><strong>The mesos-master</strong> is the central part of the cluster, it controls all jobs on the cluster. Usually multiple masters are running on a cluster, thereby given it HA capabilities, especially when running the masters in different <a href=http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-regions-availability-zones>availability zones</a>.</li><li><strong>The marathon scheduler</strong> is the scheduler for long running processes, a webserver, a carte server, a baserver, &mldr; The functionality of Marathon on the cluster is often compared to what <code>init.d</code> leverages on a linux system. To run services, keep them running, scale them etc.</li><li><strong>The chronos scheduler</strong> is a scheduler batch task, and as such often compared to <code>cron</code></li><li><strong>The mesos slaves aka agents</strong> run the actual jobs as directed by the mesos master(s)</li><li><strong>Zookeeper</strong> is used for master elections, coordination and to persist configuration throughout the cluster.</li></ul><p>There is so much more to be told about mesos, but I suggest you just <code>Run, Forrest, Run!</code> to <a href="http://ssearch.oreilly.com/?q=mesos&x=0&y=0">Oreilly</a>, <a href=https://www.manning.com/books/mesos-in-action>Manning</a> or some other it-drug delivery service and read up on this topic.</p><h1 id=create>Create</h1><p>I am going to assume a working <a href=https://docs.docker.com/engine/installation/>docker</a> / <a href=https://docs.docker.com/compose/install/>docker-compose</a> / <a href=https://docs.docker.com/machine/install-machine/>docker-machine</a> setup, some recent hardware.</p><p>For now I will focus on a virtualbox based cluster running locally. I have created a crude but usefull bash-script to get you up and running, it cleans, creates masters, slave and a loadbalancer by utilising docker-machine. I have 4cpu, 16G of RAM at my disposal, just tinker with <code>virtualbox-cpu-count</code>, <code>virtualbox-memory</code> and <code>virtualbox-disk-size</code> to make this baby fit your needs.</p><pre><code>#!/bin/sh
clear

echo &quot;creating my epic local cluster&quot;

clean() {
  echo &quot;---&gt; rm old machines, no mercy baby!&quot;
  docker-machine rm -f mesos-lb1 mesos-m1 mesos-m2 mesos-m3 mesos-s1 mesos-s2 &gt; /dev/null
}

create_masters() {
  echo &quot;---&gt; create masters&quot;
  echo &quot;---&gt; create mesos-m1&quot;
  docker-machine create -d virtualbox \
    --virtualbox-cpu-count &quot;1&quot; \
    --virtualbox-memory &quot;1024&quot; \
    --virtualbox-disk-size &quot;50000&quot; \
    mesos-m1

  echo &quot;---&gt; create mesos-m2&quot;
  docker-machine create -d virtualbox \
    --virtualbox-cpu-count &quot;1&quot; \
    --virtualbox-memory &quot;1024&quot; \
    --virtualbox-disk-size &quot;50000&quot; \
    mesos-m2

  echo &quot;---&gt; create mesos-m3&quot;
  docker-machine create -d virtualbox \
    --virtualbox-cpu-count &quot;1&quot; \
    --virtualbox-memory &quot;1024&quot; \
    --virtualbox-disk-size &quot;50000&quot; \
    mesos-m3
}

create_slaves() {
  echo &quot;---&gt; create slaves&quot;
  echo &quot;---&gt; create mesos-s1&quot;
  docker-machine create -d virtualbox \
    --virtualbox-cpu-count &quot;2&quot; \
    --virtualbox-memory &quot;4092&quot; \
    --virtualbox-disk-size &quot;50000&quot; \
    mesos-s1

  echo &quot;---&gt; create mesos-s2&quot;
  docker-machine create -d virtualbox \
      --virtualbox-cpu-count &quot;2&quot; \
      --virtualbox-memory &quot;4092&quot; \
      --virtualbox-disk-size &quot;50000&quot; \
      mesos-s2
}

create_loadbalancer() {
  echo &quot;---&gt; create loadbalancer&quot;
  echo &quot;---&gt; create mesos-lb1&quot;
  docker-machine create -d virtualbox \
    --virtualbox-cpu-count &quot;1&quot; \
    --virtualbox-memory &quot;1024&quot; \
    --virtualbox-disk-size &quot;50000&quot; \
    mesos-lb1
}
main() {
  clean
  create_masters
  create_slaves
  create_loadbalancer
  echo &quot;done&quot;
}

main

</code></pre><p>After running this script, check the results:</p><pre><code>docker-machine ls | grep virtualbox
mesos-lb1                    -        virtualbox   Running   tcp://192.168.99.105:2376           v1.11.1   
mesos-m1                     -        virtualbox   Running   tcp://192.168.99.100:2376           v1.11.1   
mesos-m2                     -        virtualbox   Running   tcp://192.168.99.101:2376           v1.11.1   
mesos-m3                     -        virtualbox   Running   tcp://192.168.99.102:2376           v1.11.1   
mesos-s1                     -        virtualbox   Running   tcp://192.168.99.103:2376           v1.11.1   
mesos-s2                     -        virtualbox   Running   tcp://192.168.99.104:2376           v1.11.1
</code></pre><p>That was easy!</p><h1 id=run>Run</h1></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=https://blijblijblij.com/tags/mesos/>mesos</a>
<a class="tag tag--primary tag--small" href=https://blijblijblij.com/tags/pentaho/>pentaho</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blijblijblij.com/2016/11/slack-update-from-pdi/ data-tooltip="Slack update from pdi"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blijblijblij.com/2016/05/pentahanl-spring-meetup/ data-tooltip="Pentaho NL spring meetup"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blijblijblij.com/2016/05/pentaho-and-mesos/"><i class="fa fa-facebook-official"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blijblijblij.com/2016/05/pentaho-and-mesos/"><i class="fa fa-twitter"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread><i class="fa fa-comment-o"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-list"></i></a></li></ul></div><div id=disqus_thread><noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2020 <a href=https://github.com/blijblijblij>blijblijblij</a>. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blijblijblij.com/2016/11/slack-update-from-pdi/ data-tooltip="Slack update from pdi"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://blijblijblij.com/2016/05/pentahanl-spring-meetup/ data-tooltip="Pentaho NL spring meetup"><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://blijblijblij.com/2016/05/pentaho-and-mesos/"><i class="fa fa-facebook-official"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://blijblijblij.com/2016/05/pentaho-and-mesos/"><i class="fa fa-twitter"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread><i class="fa fa-comment-o"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-list"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblijblijblij.com%2F2016%2F05%2Fpentaho-and-mesos%2F"><i class="fa fa-facebook-official"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblijblijblij.com%2F2016%2F05%2Fpentaho-and-mesos%2F"><i class="fa fa-twitter"></i><span>Share on Twitter</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src="https://www.gravatar.com/avatar/626342d86e1bee29d2d312efd9d2b762?s=110" alt="Author's picture"><h4 id=about-card-name>Rogier Wessel</h4><div id=about-card-bio>Happy nerd, ever searching, researching & learning new things &mldr;</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Software plumber / engineer</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>The Netherlands, Zutphen</div></div></div><div id=cover style=background-image:url(https://blijblijblij.com/images/cover.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin=anonymous></script><script src=https://blijblijblij.com/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js></script><script lang=javascript>window.onload=updateMinWidth;window.onresize=updateMinWidth;document.getElementById("sidebar").addEventListener("transitionend",updateMinWidth);function updateMinWidth(){var sidebar=document.getElementById("sidebar");var main=document.getElementById("main");main.style.minWidth="";var w1=getComputedStyle(main).getPropertyValue("min-width");var w2=getComputedStyle(sidebar).getPropertyValue("width");var w3=getComputedStyle(sidebar).getPropertyValue("left");main.style.minWidth=`calc(${w1} - ${w2} - ${w3})`;}</script><script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:false});$('pre.code-highlight > code, pre > code').each(function(i,block){if(!$(this).hasClass('codeblock')){$(this).addClass('codeblock');}
hljs.highlightBlock(block);});});</script><script>var disqus_config=function(){this.page.url='https:\/\/blijblijblij.com\/2016\/05\/pentaho-and-mesos\/';this.page.identifier='\/2016\/05\/pentaho-and-mesos\/'};(function(){if(window.location.hostname=="localhost"){return;}
var d=document,s=d.createElement('script');var disqus_shortname='blijblijblij';s.src='//'+disqus_shortname+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script></body></html>